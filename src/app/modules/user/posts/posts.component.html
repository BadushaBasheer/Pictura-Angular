<!--ORIGINAL-->
<!--<div *ngIf="posts.length === 0" class="p-4 text-center">-->
<!--    <div class="max-w-3xl mx-auto bg-gray-900 text-white rounded-xl shadow-lg p-5">-->
<!--        <p class="text-lg font-mono">Be the first to share your favorite memories with us.</p>-->
<!--        <mat-icon>insert_emoticon</mat-icon>-->
<!--    </div>-->
<!--</div>-->
<!--<div infiniteScroll-->
<!--     [infiniteScrollDistance]="2"-->
<!--     [infiniteScrollThrottle]="800"-->
<!--     (scrolled)="onScroll()">-->
<!--    <div *ngFor="let post of posts" class="p-4">-->
<!--        <div class="max-w-3xl mx-auto bg-gray-900 text-white rounded-xl shadow-lg overflow-hidden">-->
<!--            <div class="flex p-5 border-b border-gray-700">-->
<!--                <div class="flex items-center cursor-pointer">-->
<!--                    <img [src]="post.user.profilePic" alt="User Profile" class="w-10 h-10 rounded-full mr-4"/>-->
<!--                    <p class="text-lg font-mono">{{ post.user.name }}</p>-->
<!--                </div>-->
<!--                <div class="ml-auto flex items-end">-->
<!--                    <button mat-icon-button [matMenuTriggerFor]="editMenu" aria-label="menu">-->
<!--                        <mat-icon>more_vert</mat-icon>-->
<!--                    </button>-->
<!--                    <mat-menu #editMenu="matMenu" xPosition="before">-->
<!--                        <div *ngIf="post.user.id === loggedInUserId">-->
<!--                            <button mat-menu-item (click)="openDialog(deleteConfirmTemplate)">-->
<!--                                <mat-icon>delete_forever</mat-icon>-->
<!--                                <span>Delete</span>-->
<!--                            </button>-->
<!--                            <button mat-menu-item (click)="openEditDialog(post.id)">-->
<!--                                <mat-icon>edit</mat-icon>-->
<!--                                <span>Edit</span>-->
<!--                            </button>-->
<!--                        </div>-->
<!--                        <button *ngIf="post.user.id !== loggedInUserId" mat-menu-item-->
<!--                                (click)="reportUser(post.user.id)">-->
<!--                            <mat-icon>flag</mat-icon>-->
<!--                            <span>Block</span>-->
<!--                        </button>-->
<!--                    </mat-menu>-->
<!--                    <ng-template #deleteConfirmTemplate>-->
<!--                        <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">-->
<!--                            <div class="bg-black p-6 rounded-lg shadow-lg w-80">-->
<!--                                <h3 class="text-lg text-pink-600 font-semibold mb-4 text-center">Delete Post?</h3>-->
<!--                                <hr class="mb-5">-->
<!--                                <p class="text-gray-600 mb-6">Are you sure you want to delete this post?</p>-->
<!--                                <div class="flex justify-end space-x-4">-->
<!--                                    <button (click)="onDeletePost(post.id)"-->
<!--                                            class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">-->
<!--                                        Delete-->
<!--                                    </button>-->
<!--                                    <button (click)="onCancel()"-->
<!--                                            class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400">-->
<!--                                        Cancel-->
<!--                                    </button>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </ng-template>-->
<!--                </div>-->

<!--            </div>-->

<!--            <div class="p-4">-->
<!--                <p class="text-base">{{ post.caption }}</p>-->
<!--            </div>-->
<!--            <div class="w-full overflow-hidden">-->
<!--                <img [src]="post.image.url" alt="User Posts" class="w-full object-cover"/>-->
<!--            </div>-->
<!--            <div class="p-4 border-t border-gray-700">-->
<!--                <div class="flex items-center justify-between">-->
<!--                    <div class="flex space-x-4">-->
<!--                        <span class="text-sm">{{ post.liked.length }}</span>-->
<!--                        &lt;!&ndash;                    <button mat-icon-button&ndash;&gt;-->
<!--                        &lt;!&ndash;                            [ngClass]="{ 'text-red-600': isLiked, 'text-gray-400': !isLiked }"&ndash;&gt;-->
<!--                        &lt;!&ndash;                            aria-label="Like"&ndash;&gt;-->
<!--                        &lt;!&ndash;                            class="hover:text-red-600 transition-colors duration-200 ease-in-out"&ndash;&gt;-->
<!--                        &lt;!&ndash;                            (click)="likePost(post.id)">&ndash;&gt;-->
<!--                        &lt;!&ndash;                        <mat-icon>favorite</mat-icon>&ndash;&gt;-->
<!--                        &lt;!&ndash;                    </button>&ndash;&gt;-->

<!--                        <button mat-icon-button-->
<!--                                [ngClass]="{ 'text-red-600': isPostLikedByUser(post), 'text-gray-400': !isPostLikedByUser(post) }"-->
<!--                                aria-label="Like"-->
<!--                                class="hover:text-red-600 transition-colors duration-200 ease-in-out"-->
<!--                                (click)="likePost(post.id)">-->
<!--                            <mat-icon>favorite</mat-icon>-->
<!--                        </button>-->


<!--                        <button mat-icon-button aria-label="Comment"-->
<!--                                class="hover:text-blue-500 transition-colors duration-200 ease-in-out">-->
<!--                            <mat-icon>comment</mat-icon>-->
<!--                        </button>-->
<!--                    </div>-->
<!--                    <div>-->
<!--                        <button mat-icon-button aria-label="Bookmark"-->
<!--                                (click)="toggleBookmark(post.id)"-->
<!--                                [matTooltip]="isBookmarked ? 'discard' : 'save'"-->
<!--                                class="hover:text-blue-500 transition-colors duration-200 ease-in-out">-->
<!--                            <mat-icon>-->
<!--                                {{ isBookmarked ? 'bookmark' : 'bookmark_border' }}-->
<!--                            </mat-icon>-->
<!--                        </button>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--    <div *ngIf="isLoading" class="relative flex items-center justify-center p-4 bg-opacity-50 rounded-lg shadow-lg w-full max-w-3xl mx-auto">-->
<!--        <div class="flex flex-col items-center p-6 rounded-lg w-64">-->
<!--            <mat-spinner class="mb-4 text-blue-500" diameter="40"></mat-spinner>-->
<!--            <p class="mt-4 text-gray-700 text-lg font-semibold">Loading more posts...</p>-->
<!--        </div>-->
<!--    </div>-->

<!--</div>-->

<!--TESTER-->
<div *ngFor="let post of posts" class="p-4">
    <mat-card [style]="{'background-color':backgroundColor}" appearance="outlined">
        <mat-card-header>
            <div mat-card-avatar>
                <img [src]="post.user.profilePic" class="w-10 h-10 rounded-full" alt="User Profile">
            </div>
            <mat-card-title class="text-white">{{ post.user.name }}</mat-card-title>
            <mat-card-subtitle [style]="{'color': color}">{{ post.caption }}</mat-card-subtitle>
            <div class="ml-auto flex items-end">
                <button mat-icon-button [matMenuTriggerFor]="editMenu" aria-label="menu">
                    <mat-icon [style]="{'color': color}">more_vert</mat-icon>
                </button>
                <mat-menu #editMenu="matMenu" xPosition="before">
                    <div *ngIf="post.user.id === loggedInUserId">
                        <button mat-menu-item (click)="openDialog(deleteConfirmTemplate)">
                            <mat-icon>delete_forever</mat-icon>
                            <span>Delete</span>
                        </button>
                        <button mat-menu-item (click)="openEditDialog(post.id)">
                            <mat-icon>edit</mat-icon>
                            <span>Edit</span>
                        </button>
                    </div>
                    <button *ngIf="post.user.id !== loggedInUserId" mat-menu-item
                            (click)="reportUser(post.user.id)">
                        <mat-icon>flag</mat-icon>
                        <span>Block</span>
                    </button>
                </mat-menu>
                <ng-template #deleteConfirmTemplate>
                    <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                        <div class="bg-black p-6 rounded-lg shadow-lg w-80">
                            <h3 class="text-lg text-pink-600 font-semibold mb-4 text-center">Delete Post?</h3>
                            <hr class="mb-5">
                            <p class="text-gray-600 mb-6">Are you sure you want to delete this post?</p>
                            <div class="flex justify-end space-x-4">
                                <button (click)="onDeletePost(post.id)"
                                        class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
                                    Delete
                                </button>
                                <button (click)="onCancel()"
                                        class="bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400">
                                    Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                </ng-template>
            </div>
        </mat-card-header>

        <img mat-card-image [src]="post.image.url" alt="{{post.image.fileName}}">
        <mat-card-actions>
            <button mat-button>LIKE</button>
            <button mat-icon-button aria-label="Comment"
                    class="hover:text-blue-500 transition-colors duration-200 ease-in-out"
            >
                <mat-icon>comment</mat-icon>
            </button>
        </mat-card-actions>

        <div class="p-4">
            <!-- Comments Section -->
            <div *ngIf="post.comments && post.comments.length" class="flex flex-col space-y-3">
                <div *ngFor="let comment of post.comments" class="flex flex-col space-y-2">
                    <div class="flex items-start mb-2">
                        <div class="text-white">
                            <p class=" text-sm font-semibold">{{ comment.name }}</p>
                            <p class="text-sm text-gray-600">{{ comment.text }}</p>
                        </div>
                    </div>

                    <!-- Replies Section -->
                    <div *ngIf="comment.replies && comment.replies.length" class="ml-4 flex flex-col space-y-2">
                        <div *ngFor="let reply of comment.replies" class="flex items-start">
                            <p class="text-sm font-semibold">{{ reply.username }} replied:</p>
                            <p class="text-sm text-gray-600">{{ reply.text }}</p>
                        </div>
                    </div>

                    <!-- Reply Input -->
                    <div class="flex items-center border-t border-gray-300 pt-2 ml-4">
<!--                        <mat-form-field appearance="outline" class="w-full appearance-none">-->
<!--                            <textarea matInput placeholder="Reply..." [(ngModel)]="replyText[comment.id]"-->
<!--                                      class="w-full bg-transparent focus:outline-none resize-none p-1">-->
<!--                            </textarea>-->
<!--                        </mat-form-field>-->
<!--                        <button mat-button class="hover:text-blue-600 font-semibold ml-2"-->
<!--                                [style]="{'color': color}" (click)="replyToComment(post, comment.id)">-->
<!--                            Reply-->
<!--                        </button>-->
                        <mat-form-field appearance="outline" class="w-full appearance-none">
                            <textarea matInput placeholder="Reply..."
                                      class="w-full bg-transparent focus:outline-none resize-none p-1">
                            </textarea>
                        </mat-form-field>
                        <button mat-button class="hover:text-blue-600 font-semibold ml-2"
                                [style]="{'color': color}">
                            Reply
                        </button>
                    </div>
                </div>
            </div>

            <!-- Add Comment Section -->
            <div class="flex items-center border-t border-gray-300 pt-2">
                <mat-form-field appearance="outline" class="w-full appearance-none">
                    <textarea matInput placeholder="Add a comment..." [(ngModel)]="newComment"
                              class="w-full bg-transparent focus:outline-none resize-none p-1">
                    </textarea>
                </mat-form-field>
                <button mat-button class="hover:text-blue-600 font-semibold ml-2"
                        [style]="{'color': color}" (click)="addComment(post)">
                    Post
                </button>
            </div>
        </div>
    </mat-card>
</div>



<!--NOPE-->
<!--            <div class="mt-4">-->
<!--                <mat-form-field appearance="outline" class="w-full">-->
<!--                    <textarea matInput placeholder="Add a comment..." [(ngModel)]="newComment"></textarea>-->
<!--                </mat-form-field>-->
<!--                <button mat-raised-button color="primary" (click)="addComment(post)">Post</button>-->
<!--            </div>-->
<!--            <div class="mt-4">-->
<!--                <mat-form-field appearance="outline" class="w-full">-->
<!--                    <textarea-->
<!--                        class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"-->
<!--                        matInput placeholder="Add a comment..." [(ngModel)]="newComment">-->
<!--                    </textarea>-->
<!--                </mat-form-field>-->
<!--                <div class="flex justify-end mt-3">-->
<!--                    <button-->
<!--                        class="bg-blue-500 hover:bg-blue-600 text-white font-semibold py-2 px-4 rounded shadow-lg transition duration-200 ease-in-out"-->
<!--                        mat-raised-button color="primary"-->
<!--                        (click)="addComment(post)">-->
<!--                        Post-->
<!--                    </button>-->
<!--                </div>-->
<!--            </div>-->
